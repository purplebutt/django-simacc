{% load core_filters %}
{% load core_tags %}


<div id="sidebar_menu" class="nav flex-column rounded user-select-none d-print-none" {{attrs}}>
    <h5 id="page_title" class="p-2 fw-700 text-end">{{page_title}}</h5>

    <div class="d-flex p-2 justify-content-end align-items-center gap-2 border border-2">
        <button class="btn btn-outline-primary px-2 py-1" 
            hx-swap="innerHTML"
            hx-target="div#dataTableContent"
            hx-get="{{request.path}}"
            title="Refresh"><i class="fa fa-refresh" aria-hidden="true"></i></button>
        {% if add_single_url %}
            <button class="btn btn-outline-warning px-2 py-1" data-bs-toggle="modal" data-bs-target="#AddModal"
                hx-swap="innerHTML"
                hx-target="#AddModalContent"
                hx-get="{{add_single_url}}"
                title="Add single (not recommended, use 'add new' instead)" ><i class="fa fa-pencil" aria-hidden="true"></i></button>
        {% endif %}
        <button class="btn btn-outline-primary px-2 py-1" data-bs-toggle="modal" data-bs-target="#AddModal"
            hx-swap="innerHTML"
            hx-target="#AddModalContent"
            hx-get="{{add_url}}"
            title="Add new" ><i class="fa fa-plus" aria-hidden="true"></i></button>
    </div>
    <form class="d-flex p-0 my-2 my-lg-0">
        <input class="form-control rounded-0 " type="search" 
            name="search_key" placeholder="Search" aria-label="Search"
            hx-get="{{search_url}}"
            hx-target="div#dataTableContent"
            hx-trigger="keyup changed delay:500ms"
            {% comment %} hx-push-url="true" {% endcomment %}
            hx-swap="innerHTML"/>
        <button class="btn btn-outline-primary rounded-0 border-0 border-top border-end border-bottom"
            hx-get="{{search_url}}"
            hx-target="div#dataTableContent"
            {% comment %} hx-push-url="true" {% endcomment %}
            hx-swap="innerHTML"
            hx-include="input[name=search_key]">
            <i class="fa fa-magnifying-glass"></i></button>
    </form>

    {% for k in side_menu.items %}
        {% include 'apps/_comps/collapse_menu.html' with name=k.0 items=k.1 %}
    {% endfor %}

    {% comment %} <div class="px-3 py-2"> {% include '_comps/range_select.html' %} </div> {% endcomment %}

    <style>
        a.sidebar-collapse-btn>svg {
            transition: all .3s ease;
            transform: rotate(90deg);
        }
        a.sidebar-collapse-btn.collapsed>svg {
            transition: all .3s ease;
            transform: rotate(0deg);
        }
    </style>
</div>
